\begin{lstlisting}[
	% there are many more options of styling, see the official documentation, these are just the defaults I like
	frame=single, % make single-line frame around the verbatim
	framesep=2mm, % put some more spacing between the frame and text
	aboveskip=5mm, % put some more space above the box
	basicstyle={\linespread{0.9}\small\ttfamily}, % use typewriter (monospace) font
	caption={The main loop for parsing the expressions}, % set the caption text
	captionpos=b, % put the caption at the bottom (b) or top (t) or both (bt)
    label={listing:expressions}, % label to be referenced via \ref{}
	numbers=left, % line numbers on the left
	numberstyle={\scriptsize\ttfamily\color{black!60}}, % the style for line numbers
	escapeinside={<@}{@>} % between those sequences are commands evaluated
]
<@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{pub}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{3010CF}{\textbf{\texttt{fn}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{255CFF}{\texttt{expression}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{:}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{*}}@><@\textcolor[HTML]{EA5110}{\texttt{Parser}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{rbp}}@><@\textcolor[HTML]{1041FF}{\texttt{:}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{Precedence}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{!}}@><@\textcolor[HTML]{1041FF}{\texttt{*}}@><@\textcolor[HTML]{EA5110}{\texttt{AST}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{FF1010}{\texttt{\{}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{7777BB}{\textit{\texttt{//\ nud\ stands\ for\ null\ denotation}}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{const}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{nud}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{getNud}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{const}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{n}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{nud}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1010FF}{\texttt{orelse}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{FF1010}{\texttt{\{}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{911010}{\textit{\texttt{try}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{000000}{\texttt{errs}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{errorAt}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{peekToken}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{000000}{\texttt{start}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{peekToken}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{000000}{\texttt{end}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{418310}{\texttt{"\{s\}\ can't\ be\ at\ the\ beginning\ of\ an\ expression."}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{FF1010}{\texttt{\{}}@><@\textcolor[HTML]{EA5110}{\texttt{token}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{formatTokenType}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{peekToken}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{000000}{\texttt{type}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{FF1010}{\texttt{\}}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{1010FF}{\textit{\texttt{return}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{error}}}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{EA5110}{\texttt{InvalidPrefix}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{FF1010}{\texttt{\}}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{var}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{left}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{911010}{\textit{\texttt{try}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{255CFF}{\texttt{n}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{errdefer}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{left}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{deinit}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{000000}{\texttt{allocator}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{7777BB}{\textit{\texttt{//\ led\ stands\ for\ left\ denotation}}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{var}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{led}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{getLed}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{7777BB}{\textit{\texttt{//\ lbp\ is\ left\ binding\ power}}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{var}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{c}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{var}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{lbp}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{led}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1010FF}{\texttt{orelse}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1010FF}{\textit{\texttt{return}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{left}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{3010CF}{\textit{\textbf{\texttt{while}}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{EA5110}{\texttt{rbp}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{<}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{lbp}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{FF1010}{\texttt{\{}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{EA5110}{\texttt{left}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{911010}{\textit{\texttt{try}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{255CFF}{\texttt{c}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{left}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{EA5110}{\texttt{led}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{self}}@><@\textcolor[HTML]{1041FF}{\texttt{.}}@><@\textcolor[HTML]{255CFF}{\texttt{getLed}}@><@\textcolor[HTML]{FF1010}{\texttt{(}}@><@\textcolor[HTML]{FF1010}{\texttt{)}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ \ \ \ \ }}@><@\textcolor[HTML]{EA5110}{\texttt{c}}@><@\textcolor[HTML]{1041FF}{\texttt{,}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{lbp}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1041FF}{\texttt{=}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{led}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1010FF}{\texttt{orelse}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{1010FF}{\textit{\texttt{return}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{left}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{FF1010}{\texttt{\}}}@>
<@\textcolor[HTML]{000000}{\texttt{\ \ \ \ }}@><@\textcolor[HTML]{1010FF}{\textit{\texttt{return}}}@><@\textcolor[HTML]{000000}{\texttt{\ }}@><@\textcolor[HTML]{EA5110}{\texttt{left}}@><@\textcolor[HTML]{1041FF}{\texttt{;}}@>
<@\textcolor[HTML]{FF1010}{\texttt{\}}}@>

\end{lstlisting}